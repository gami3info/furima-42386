// payjp@2.3.0 downloaded from https://ga.jspm.io/npm:payjp@2.3.0/built/index.js

import*as e from"superagent";import t from"buffer";var r=e;try{"default"in e&&(r=e.default)}catch(e){}var s={};var u=t.Buffer;Object.defineProperty(s,"__esModule",{value:true});const i=r;class Resource{payjp;constructor(e){this.payjp=e}get apibase(){return this.payjp.config.apibase}get apikey(){return this.payjp.apikey}buildHeader(e){const t=u.from(`${this.payjp.apikey}:`).toString("base64");const r={Accept:"application/json",Authorization:`Basic ${t}`};e==="POST"&&(r["Content-Type"]="application/x-www-form-urlencoded");return r}getCurrentDelay(e,t,r){const s=Math.min(t*2**e,r);return Math.ceil(s/2*(1+Math.random()))}request(e,t,r={},s={}){const u=`${this.payjp.config.apibase}/${t}`;const n=Object.assign(this.buildHeader(e),s);const doRequest=()=>{let t=i(e,u).set(n);t=e==="GET"||e==="DELETE"?t.query(r):t.send(r);this.payjp.config.timeout>0&&(t=t.timeout(this.payjp.config.timeout));return t};let c=0;const retry=(e,t)=>doRequest().then(e).catch((r=>{if(!(r.status===429&&c<this.payjp.config.maxRetry))return t(r);{const r=this.getCurrentDelay(c,this.payjp.config.retryInitialDelay,this.payjp.config.retryMaxDelay);c++;setTimeout((()=>retry(e,t)),r)}}));return new Promise(retry).then((e=>e.body))}}s.default=Resource;var n={};Object.defineProperty(n,"__esModule",{value:true});const c=s;class Accounts extends c.default{resource;constructor(e){super(e);this.resource="accounts"}retrieve(){return this.request("GET",`${this.resource}`)}}n.default=Accounts;var o={};Object.defineProperty(o,"__esModule",{value:true});const a=s;class Charges extends a.default{resource;constructor(e){super(e);this.resource="charges"}list(e={}){return this.request("GET",this.resource,e)}create(e){return this.request("POST",this.resource,e)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}update(e,t={}){return this.request("POST",`${this.resource}/${e}`,t)}refund(e,t={}){return this.request("POST",`${this.resource}/${e}/refund`,t)}reauth(e,t={}){return this.request("POST",`${this.resource}/${e}/reauth`,t)}capture(e,t={}){return this.request("POST",`${this.resource}/${e}/capture`,t)}tds_finish(e){return this.request("POST",`${this.resource}/${e}/tds_finish`)}}o.default=Charges;var h={};Object.defineProperty(h,"__esModule",{value:true});const l=s;class Cards extends l.default{resource;constructor(e){super(e);this.resource="cards"}list(e,t={}){return this.request("GET",`customers/${e}/${this.resource}`,t)}create(e,t={}){return this.request("POST",`customers/${e}/${this.resource}`,t)}retrieve(e,t){return this.request("GET",`customers/${e}/${this.resource}/${t}`)}update(e,t,r={}){return this.request("POST",`customers/${e}/${this.resource}/${t}`,r)}delete(e,t){return this.request("DELETE",`customers/${e}/${this.resource}/${t}`)}}h.default=Cards;var d={};Object.defineProperty(d,"__esModule",{value:true});const p=s;const f=h;class CustomerSubscriptions extends p.default{resource;constructor(e){super(e);this.resource="subscriptions"}list(e,t={}){return this.request("GET",`customers/${e}/${this.resource}`,t)}retrieve(e,t){return this.request("GET",`customers/${e}/${this.resource}/${t}`)}}class Customers extends p.default{resource;cards;subscriptions;constructor(e){super(e);this.resource="customers";this.cards=new f.default(e);this.subscriptions=new CustomerSubscriptions(e)}list(e={}){return this.request("GET",this.resource,e)}create(e={}){return this.request("POST",this.resource,e)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}update(e,t={}){return this.request("POST",`${this.resource}/${e}`,t)}delete(e){return this.request("DELETE",`${this.resource}/${e}`)}}d.default=Customers;var $={};Object.defineProperty($,"__esModule",{value:true});const T=s;class Events extends T.default{resource;constructor(e){super(e);this.resource="events"}list(e={}){return this.request("GET",this.resource,e)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}}$.default=Events;var q={};Object.defineProperty(q,"__esModule",{value:true});const v=s;class Plans extends v.default{resource;constructor(e){super(e);this.resource="plans"}list(e={}){return this.request("GET",this.resource,e)}create(e){return this.request("POST",this.resource,e)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}update(e,t={}){return this.request("POST",`${this.resource}/${e}`,t)}delete(e){return this.request("DELETE",`${this.resource}/${e}`)}}q.default=Plans;var y={};Object.defineProperty(y,"__esModule",{value:true});const E=s;class Subscriptions extends E.default{resource;constructor(e){super(e);this.resource="subscriptions"}list(e={}){return this.request("GET",this.resource,e)}create(e){return this.request("POST",this.resource,e)}update(e,t={}){return this.request("POST",`${this.resource}/${e}`,t)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}pause(e){return this.request("POST",`${this.resource}/${e}/pause`)}resume(e,t={}){return this.request("POST",`${this.resource}/${e}/resume`,t)}cancel(e){return this.request("POST",`${this.resource}/${e}/cancel`)}delete(e,t={}){return this.request("DELETE",`${this.resource}/${e}`,t)}}y.default=Subscriptions;var _={};Object.defineProperty(_,"__esModule",{value:true});const m=s;class Tenants extends m.default{resource;constructor(e){super(e);this.resource="tenants"}list(e={}){return this.request("GET",this.resource,e)}create(e){return this.request("POST",this.resource,e)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}update(e,t={}){return this.request("POST",`${this.resource}/${e}`,t)}delete(e){return this.request("DELETE",`${this.resource}/${e}`)}applicationUrls(e){return this.request("POST",`${this.resource}/${e}/application_urls`)}}_.default=Tenants;var P={};Object.defineProperty(P,"__esModule",{value:true});const O=s;class TenantTransfers extends O.default{resource;constructor(e){super(e);this.resource="tenant_transfers"}list(e={}){return this.request("GET",this.resource,e)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}charges(e,t={}){return this.request("GET",`${this.resource}/${e}/charges`,t)}statementUrls(e,t={}){return this.request("POST",`${this.resource}/${e}/statement_urls`,t)}}P.default=TenantTransfers;var b={};Object.defineProperty(b,"__esModule",{value:true});const S=s;class Tokens extends S.default{resource;constructor(e){super(e);this.resource="tokens"}create(e={},t={}){return this.request("POST",this.resource,e,t)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}tds_finish(e){return this.request("POST",`${this.resource}/${e}/tds_finish`)}}b.default=Tokens;var G={};Object.defineProperty(G,"__esModule",{value:true});const j=s;class Transfers extends j.default{resource;constructor(e){super(e);this.resource="transfers"}list(e={}){return this.request("GET",this.resource,e)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}charges(e,t={}){return this.request("GET",`${this.resource}/${e}/charges`,t)}}G.default=Transfers;var g={};Object.defineProperty(g,"__esModule",{value:true});const x=s;class Statements extends x.default{resource;constructor(e){super(e);this.resource="statements"}list(e={}){return this.request("GET",this.resource,e)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}statementUrls(e,t={}){return this.request("POST",`${this.resource}/${e}/statement_urls`,t)}}g.default=Statements;var w={};Object.defineProperty(w,"__esModule",{value:true});const M=s;class Terms extends M.default{resource;constructor(e){super(e);this.resource="terms"}list(e={}){return this.request("GET",this.resource,e)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}}w.default=Terms;var D={};Object.defineProperty(D,"__esModule",{value:true});const k=s;class Balances extends k.default{resource;constructor(e){super(e);this.resource="balances"}list(e={}){return this.request("GET",this.resource,e)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}statementUrls(e,t={}){return this.request("POST",`${this.resource}/${e}/statement_urls`,t)}}D.default=Balances;var C={};Object.defineProperty(C,"__esModule",{value:true});const R=s;class ThreeDSecureRequests extends R.default{resource;constructor(e){super(e);this.resource="three_d_secure_requests"}list(e={}){return this.request("GET",this.resource,e)}create(e){return this.request("POST",this.resource,e)}retrieve(e){return this.request("GET",`${this.resource}/${e}`)}}C.default=ThreeDSecureRequests;var L={};const A=n;const B=o;const U=d;const I=$;const H=q;const z=y;const K=_;const Y=P;const F=b;const J=G;const N=g;const Q=w;const V=D;const W=C;const Payjp=function(e,t={}){if(!e)throw new Error("Please set apikey.");if(e.indexOf("pk_")===0)throw new Error("You cannot use the public apikey in this SDK.");const r={apikey:e,config:{apibase:t.apibase||"https://api.pay.jp/v1",timeout:t.timeout||0,maxRetry:t.maxRetry||0,retryInitialDelay:t.retryInitialDelay||2e3,retryMaxDelay:t.retryMaxDelay||32e3}};return{apikey:e,config:r.config,charges:new B.default(r),customers:new U.default(r),plans:new H.default(r),subscriptions:new z.default(r),tokens:new F.default(r),transfers:new J.default(r),events:new I.default(r),accounts:new A.default(r),tenants:new K.default(r),tenant_transfers:new Y.default(r),statements:new N.default(r),terms:new Q.default(r),balances:new V.default(r),three_d_secure_requests:new W.default(r)}};L=Payjp;var X=L;export{X as default};

